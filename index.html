<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ูุชุงุจุนุฉ ููุงููุช ุงูุตูุงุฉ</title>
  <link id="googleFontLink" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap">
  <link rel="stylesheet" href="styles.css">
  <!-- Firebase (Compat) CDN -->
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
  <script defer src="app.js"></script>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">๐ฐ๏ธ</div>
      <div>
        <h1>ูุชุงุจุนุฉ ููุงููุช ุงูุตูุงุฉ</h1>
        <div class="now" id="now"></div>
      </div>
    </div>
    <div class="toolbar">
      <button id="enableAudioBtn" class="ghost">ุชูุนูู ุงูุตูุช</button>
      <button id="openScreen" class="ghost">ุดุงุดุฉ ุงูุนุฑุถ</button>
      <button id="openScreen2" class="ghost">ุดุงุดุฉ ุงูุนุฑุถ 2 (2304ร540)</button>
      <button id="copyScreenLink" class="ghost">ูุณุฎ ุฑุงุจุท ุดุงุดุฉ 1</button>
      <button id="copyScreen2Link" class="ghost">ูุณุฎ ุฑุงุจุท ุดุงุดุฉ 2</button>
    </div>
  </header>

  <main class="container">
    <!-- ูุงุฌูุฉ ุงูุนุฑุถ -->
    <section class="card hero" aria-live="polite">
      <div class="next-title">ุงูุตูุงุฉ ุงููุงุฏูุฉ</div>
      <div class="next-prayer">
        <div class="next-prayer-name" id="nextPrayerName">โ</div>
        <div class="next-prayer-time" id="nextPrayerClock">โ</div>
      </div>
      <div class="countdown" id="countdown">00:00:00</div>
      <div class="phase" id="phase">ุญุชู ุงูุฃุฐุงู</div>
      <div class="progress" aria-hidden="true" id="progress"><div class="bar" id="bar"></div></div>
      <div class="grid" id="todayGrid"></div>
    </section>

    <!-- ููุญุฉ ุงูุชุญูู -->
    <aside class="card settings" id="settings">
      <h2>ููุญุฉ ุงูุชุญูู</h2>
      <div class="small">ุงุฑูุน ุงูุฌุฏููุ ูุงุถุจุท ูุชุฑุงุช ุงูุฅูุงูุฉุ ูุงูุชูุจููุงุชุ ูุงูุฃุตูุงุชุ ูุงูุฎูููุฉุ ูุงููุธูุฑ. ุงูุจูุงูุงุช ุงูุตุบูุฑุฉ ุชูุญููุธ ูุญูููุงุ ูุงููุณุงุฆุท ุงููุจูุฑุฉ ูู IndexedDB. ูุนูู ุงููุฒุงููุฉ (Firebase) ูุชูุชูู ุงูุฅุนุฏุงุฏุงุช ููุดุงุดุงุช.</div>

      <div class="row">
        <div class="field">
          <label>ุฑูุน ุงูุฌุฏูู (CSV ุฃู JSON)</label>
          <div class="dropzone" id="dropzone">
            <div>ุฃุณูุท ุงูููู ููุง ุฃู ุงุฎุชุฑู</div>
            <input type="file" id="scheduleFile" accept=".csv,.json" />
          </div>
          <div class="small">CSV headers: <code>date,fajr,dhuhr,asr,maghrib,isha</code> ุฃู <code>ุงูุชุงุฑูุฎ,ุงููุฌุฑ,ุงูุธูุฑ,ุงูุนุตุฑ,ุงููุบุฑุจ,ุงูุนุดุงุก</code> ยท ุงูุชุงุฑูุฎ: <code>YYYY-MM-DD</code>.</div>
        </div>
        <div class="field">
          <label>ูุฏุฉ ุงูุฅูุงูุฉ (ุจุงูุฏูุงุฆู ุจุนุฏ ุงูุฃุฐุงู)</label>
          <div class="grid">
            <div class="field"><label>ุงููุฌุฑ</label><input type="number" id="offFajr" min="0" step="1" value="20"></div>
            <div class="field"><label>ุงูุธูุฑ</label><input type="number" id="offDhuhr" min="0" step="1" value="25"></div>
            <div class="field"><label>ุงูุนุตุฑ</label><input type="number" id="offAsr" min="0" step="1" value="20"></div>
            <div class="field"><label>ุงููุบุฑุจ</label><input type="number" id="offMaghrib" min="0" step="1" value="10"></div>
            <div class="field"><label>ุงูุนุดุงุก</label><input type="number" id="offIsha" min="0" step="1" value="15"></div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>ูุชุฑุฉ ุณูุงุญ ุจุนุฏ ุงูุฅูุงูุฉ (ุจุงูุฏูุงุฆู)</label>
          <input type="number" id="graceMin" min="0" step="1" value="8" />
          <div class="small">ุฎูุงููุง ุชุธูุฑ ุนุจุงุฑุฉ ยซุงูุตูุงุฉ ูุงุฆูุฉยป ูุจู ุงูุงูุชูุงู ููุฃุฐุงู ุงูุชุงูู.</div>
        </div>
        <div class="field">
          <label>ุชูุจูู ูุจู ุงูุฅูุงูุฉ (ุจุงูุฏูุงุฆู)</label>
          <input type="number" id="preAlertMin" min="0" step="1" value="5" />
          <div class="small">ุนูุฏ ุงููุตูู ููุฐุง ุงูุญุฏ ููุดุบูู ุตูุช ุงูุชูุจูู ููููุนู ููุท ุชูุจูู ุจุตุฑู ููููุถ ุงูุดุฑูุท.</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>ุฃููุงู ุงููุตูุต ูุงูุฎูููุฉ ุญุณุจ ุงูุญุงูุฉ</label>
          <div class="grid">
            <div class="field"><label>ููู ูููุฒ</label><input type="color" id="accent" value="#6ee7b7"></div>
            <div class="field"><label>ููู ูููุฒ 2</label><input type="color" id="accent2" value="#60a5fa"></div>
            <div class="field"><label>ููู ุงููุต</label><input type="color" id="textColor" value="#f7f9fc"></div>
            <div class="field"><label>ููู "ุญุชู ุงูุฃุฐุงู"</label><input type="color" id="phaseAthanColor" value="#60a5fa"></div>
            <div class="field"><label>ููู "ุญุชู ุงูุฅูุงูุฉ"</label><input type="color" id="phaseIqamaColor" value="#fbbf24"></div>
            <div class="field"><label>ููู "ุงูุตูุงุฉ ูุงุฆูุฉ"</label><input type="color" id="phaseGraceColor" value="#a8b3cf"></div>
            <div class="field"><label>ููู "ุชูุจูู ูุจู ุงูุฅูุงูุฉ"</label><input type="color" id="phaseAlertColor" value="#ef4444"></div>
            <div class="field"><label>ููู ุงูุฎูููุฉ (ุซุงุจุช)</label><input type="color" id="bg" value="#0b1220"></div>
            <div class="field"><label>ููู ุงูุฎูููุฉ (ุงููุถุน ุงูุทุจูุนู)</label><input type="color" id="bgNormal" value="#0b1220"></div>
            <div class="field"><label>ููู ุงูุฎูููุฉ (ุญุชู ุงูุฅูุงูุฉ)</label><input type="color" id="bgIqama" value="#1b2a46"></div>
            <div class="field"><label>ููู ุงูุฎูููุฉ (ุงูุตูุงุฉ ูุงุฆูุฉ)</label><input type="color" id="bgGrace" value="#342a1b"></div>
            <div class="field"><label>ููู ุงูุฎูููุฉ (ุชูุจูู ูุจู ุงูุฅูุงูุฉ)</label><input type="color" id="bgAlert" value="#3a1b1b"></div>
          </div>
        </div>
        <div class="field">
          <label>ุงูุฎูููุฉ</label>
          <div class="grid">
            <div class="field">
              <label>ููุน ุงูุฎูููุฉ</label>
              <select id="bgMode">
                <option value="color">ููู ุซุงุจุช</option>
                <option value="phase">ุฃููุงู ุญุณุจ ุงูุญุงูุฉ</option>
                <option value="image">ุตูุฑุฉ</option>
              </select>
            </div>
          </div>
          <label style="margin-top:8px">ุตูุฑุฉ ุงูุฎูููุฉ</label>
          <input type="file" id="bgImage" accept="image/*" />
          <div class="toolbar">
            <button class="danger ghost" id="clearBg">ุฅุฒุงูุฉ ุงูุฎูููุฉ</button>
          </div>
          <div class="small">ุงุฎุชุฑ "ุฃููุงู ุญุณุจ ุงูุญุงูุฉ" ูุชุจุฏูู ุงูุฎูููุฉ ุชููุงุฆููุง ุจูู (ุทุจูุนู / ุญุชู ุงูุฅูุงูุฉ / ุงูุตูุงุฉ ูุงุฆูุฉ / ุชูุจูู ูุจู ุงูุฅูุงูุฉ). ุงุฎุชุฑ "ุตูุฑุฉ" ูุงุณุชุฎุฏุงู ุตูุฑุฉ ุฎูููุฉ.</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>ุชูุณูู ุงูููุช</label>
          <select id="timeFormat">
            <option value="12" selected>12 ุณุงุนุฉ</option>
            <option value="24">24 ุณุงุนุฉ</option>
          </select>
          <label class="small">ุฅุฒุงุญุฉ ุงูููุทูุฉ ุงูุฒูููุฉ (ุจุงูุฏูุงุฆู)</label>
          <input type="number" id="tzOffset" placeholder="0" value="0">
        </div>
        <div class="field">
          <label>ุฑุงุจุท Google Fonts (ุงุฎุชูุงุฑู)</label>
          <input type="url" id="googleFontUrl" placeholder="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" />
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>ุตูุช ุงูุฃุฐุงู (MP3/WAV)</label>
          <input type="file" id="athanSound" accept="audio/*" />
          <div class="toolbar">
            <button class="ghost" id="testAthan">ุชุฌุฑุจุฉ</button>
            <button class="danger ghost" id="clearAthan">ุญุฐู</button>
          </div>
        </div>
        <div class="field">
          <label>ุตูุช ุงูุฅูุงูุฉ (MP3/WAV)</label>
          <input type="file" id="iqamaSound" accept="audio/*" />
          <div class="toolbar">
            <button class="ghost" id="testIqama">ุชุฌุฑุจุฉ</button>
            <button class="danger ghost" id="clearIqama">ุญุฐู</button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label>ุตูุช ุงูุชูุจูู ูุจู ุงูุฅูุงูุฉ (MP3/WAV)</label>
          <input type="file" id="alertSound" accept="audio/*" />
          <div class="toolbar">
            <button class="ghost" id="testAlert">ุชุฌุฑุจุฉ</button>
            <button class="danger ghost" id="clearAlert">ุญุฐู</button>
          </div>
          <div class="small">ููุดุบูู ุชููุงุฆููุง ุนูุฏ ุชุจููู <span id="preAlertMinLabel">5</span> ุฏูููุฉ ุนูู ุงูุฅูุงูุฉ.</div>
        </div>
      </div>

      <!-- ==== ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ (Firebase) ==== -->
      <details open>
        <summary>ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ (Firebase)</summary>
        <div class="row">
          <div class="field">
            <label>ุชูุนูู ุงููุฒุงููุฉ</label>
            <select id="cloudEnabled">
              <option value="off">ูุชูููุฉ</option>
              <option value="on">ููุนููุฉ</option>
            </select>
            <div class="small">ุนูุฏ ุงูุชูุนูู ุณูุชู ุฅุฑุณุงู/ุงุณุชูุจุงู ุงูุฌุฏูู ูุงูุฅุนุฏุงุฏุงุช ูุงููุณุงุฆุท ููุฑูุง.</div>
          </div>
          <div class="field">
            <label>Room ID</label>
            <input type="text" id="roomId" placeholder="ูุซุงู: Media_Office" value="Media_Office" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label>apiKey</label>
            <input type="text" id="fb_apiKey" placeholder="AIza..." />
          </div>
          <div class="field">
            <label>authDomain</label>
            <input type="text" id="fb_authDomain" placeholder="yourapp.firebaseapp.com" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label>databaseURL (Realtime DB)</label>
            <input type="text" id="fb_databaseURL" placeholder="https://yourapp-default-rtdb.firebaseio.com" />
          </div>
          <div class="field">
            <label>storageBucket</label>
            <input type="text" id="fb_storageBucket" placeholder="yourapp.appspot.com ุฃู yourapp.firebasestorage.app" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label>ุงูุจุฑูุฏ (ูููุดุฑู)</label>
            <input type="text" id="fb_email" placeholder="admin@example.com" />
          </div>
          <div class="field">
            <label>ูููุฉ ุงููุฑูุฑ</label>
            <input type="password" id="fb_password" placeholder="โขโขโขโขโขโขโขโข" />
          </div>
        </div>
        <div class="toolbar">
          <button id="fbConnect">ุชููุฆุฉ Firebase</button>
          <button id="fbLogin" class="ghost">ุฏุฎูู</button>
          <button id="fbLogout" class="ghost">ุฎุฑูุฌ</button>
          <button id="fbTest" class="ghost">ุงุฎุชุจุงุฑ ุงูุงุชุตุงู</button>
        </div>
        <div class="toolbar">
          <button id="pushAll" class="ghost">ุฅุฑุณุงู ุงููู ููุณุญุงุจุฉ</button>
          <button id="pullAll" class="ghost">ุณุญุจ ูู ุงูุณุญุงุจุฉ</button>
          <button id="pushMedia" class="ghost">ุฑูุน ุงููุณุงุฆุท ููุณุญุงุจุฉ</button>
          <button id="fbMediaTest" class="ghost">ุงุฎุชุจุงุฑ ูุณุงุฆุท ุงูุณุญุงุจุฉ</button>
          <button id="fbDiagStorage" class="ghost">ุชุดุฎูุต ุงูุชุฎุฒูู</button>
        </div>
        <div class="small">ุงูุญุงูุฉ: <span id="cloudStatus">ุบูุฑ ูุชุตู</span> ยท ุงูุบุฑูุฉ: <span id="roomBadge">โ</span></div>
      </details>

      <div class="toolbar" style="margin-top:8px;">
        <button id="saveSettings">ุญูุธ</button>
        <button id="exportData" class="ghost">ุชุตุฏูุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
        <button id="exportWithMedia" class="ghost">ุชุตุฏูุฑ ูุน ุงููุณุงุฆุท</button>
        <button id="importData" class="ghost">ุงุณุชูุฑุงุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</button>
        <button id="resetAll" class="danger">ุฅุนุงุฏุฉ ุงูุถุจุท ุงูููู</button>
        <button id="showUsage" class="ghost">ุนุฑุถ ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู</button>
        <button id="runTests" class="ghost">ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช</button>
      </div>

      <details>
        <summary>ุณุฌูู ุชุดุฎูุต/ุงุฎุชุจุงุฑ</summary>
        <pre id="testOutput" class="small"></pre>
      </details>

      <div class="stack">
        <div class="small">ูุนุงููุฉ ุงูุฌุฏูู ุงููุญููู</div>
        <div class="table-wrap">
          <table id="scheduleTable">
            <thead>
              <tr><th>ุงูุชุงุฑูุฎ</th><th>ุงููุฌุฑ</th><th>ุงูุธูุฑ</th><th>ุงูุนุตุฑ</th><th>ุงููุบุฑุจ</th><th>ุงูุนุดุงุก</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </aside>
  </main>

  <footer>
    <div>ููุงุญุธุฉ: ุงููุฑ ยซุชูุนูู ุงูุตูุชยป ูุฑุฉ ูุงุญุฏุฉ ููุณูุงุญ ุจุงูุชุดุบูู ุงูุตูุชู ูู ุงููุชุตููุญ.</div>
    <div>ุฌููุน ุงูุจูุงูุงุช ูุญููุธุฉ ูุญูููุง ยท <span id="status">ุฌุงูุฒ</span></div>
  </footer>

  <!-- ุฒุฑ ุนุงุฆู ูุชูุนูู ุงูุตูุช ูู ูุถุน ุดุงุดุฉ ุงูุนุฑุถ -->
  <div class="floating-audio" id="floatingAudio">
    <button id="enableAudioFloating">ุชูุนูู ุงูุตูุช</button>
  </div>

  <audio id="audioAthan" preload="auto"></audio>
  <audio id="audioIqama" preload="auto"></audio>
  <audio id="audioAlert" preload="auto"></audio>
</body>
</html>
